  knowage:
    image: knowagelabs/knowage-server-docker:8.0
    depends_on:
      - mysql
    environment:
      - DB_USER=${KNOWAGE_DB_USER}
      - DB_PASS=${KNOWAGE_DB_PASSWORD}
      - DB_ROOT_PASS=${MYSQL_ROOT_PASSWORD}
      - DB_DB=${KNOWAGE_DB_NAME}
      - DB_HOST=mysql
      - DB_PORT=3306
      - HMAC_KEY=${KNOWAGE_HMAC_KEY}
      - PASSWORD_ENCRYPTION_SECRET=${KNOWAGE_PASSWORD_ENCRYPTION_SECRET}
      - CACHE_DB_HOST=mysql
      - CACHE_DB_PORT=3306
      - CACHE_DB_DB=${KNOWAGE_DB_NAME}
      - CACHE_DB_USER=${KNOWAGE_DB_USER}
      - CACHE_DB_PASS=${KNOWAGE_DB_PASSWORD}
      - PUBLIC_ADDRESS=localhost
      - OAUTH2=${KNOWAGE_OAUTH2}
      - CLIENT_ID=${KNOWAGE_CLIENT_ID}
      - CLIENT_SECRET=${KNOWAGE_CLIENT_SECRET}
      - KEYROCK_URL=${KNOWAGE_KEYROCK_URL}
      - KEYROCK_TOKEN_PATH=${KNOWAGE_KEYROCK_TOKEN_PATH}
      - KEYROCK_APPLICATION_ID=${KNOWAGE_KEYROCK_APPLICATION_ID}
      - KEYROCK_ADMIN_ID=${KNOWAGE_KEYROCK_ADMIN_ID}
      - KEYROCK_ADMIN_EMAIL=${KNOWAGE_KEYROCK_ADMIN_EMAIL}
      - KEYROCK_ADMIN_PASSWORD=${KNOWAGE_KEYROCK_ADMIN_PASSWORD}
      - KEYROCK_REDIRECT_URI=${KNOWAGE_KEYROCK_REDIRECT_URI}
    restart: always
    logging:
      driver: syslog
      options:
        tag: "[knowage]"
